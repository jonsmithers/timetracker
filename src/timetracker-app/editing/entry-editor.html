<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="./time-picker.html">
<dom-module id="entry-editor">
    <template>
      <style>
        .horizontalFlexLayout {
          display: flex;
        }
        .horizontalFlexLayout > * {
          flex-grow: 1;
          flex-basis: 50vw;
        }
      </style>
      <div class="horizontalFlexLayout">
        <paper-item>
          [[_computeDay(entry.startTime)]]
        </paper-item>
        <paper-item on-tap="_editStartTime">
          [[_computeTime(entry.startTime)]]
        </paper-item>
      </div>
      <div class="horizontalFlexLayout">
        <paper-item>
          [[_computeDay(entry.stopTime)]]
        </paper-item>
        <paper-item>
          [[_computeTime(entry.stopTime)]]
        </paper-item>
      </div>



      <time-picker id="timePicker"></time-picker>
    </template>

    <script>
      Polymer({
        is: "entry-editor",

        properties: {
          entry: Object
        },
        listeners: {},
        observers: [
          "_onEntrySet(entry)"
        ],

        open: function(entryJson) {
          this.entry = new TimeEntry(entryJson);
        },
        _onEntrySet: function() {
        },
        _computeDay: function(m) {
          return m.format("dddd, MMMM DD");
          // return entry.getStartDay();
        },
        _computeStopDay: function(entry) {
          return entry.getStopDay();
        },
        _computeTime: function(m) {
          return m.format("h:mm a");
        },
        _computeStopTime: function(entry) {
          return entry.getStopTime();
        },
        _editStartTime: function(e) {
          this.$.timePicker.open(this.entry.startTime).then(function(m) {
            this.set("entry.startTime", m);
          }.bind(this));
        },
        created: function() {},
        ready: function() {},
        attached: function() {},
        detached: function() {}
      });
    </script>
</dom-module>
